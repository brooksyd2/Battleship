function fireTorpedo(){var e=document.getElementById("position");$("#fireButton").prop("disabled",!0);var n={torpedoPosition:e.value};e.disabled=!0,fetch("/api/game",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(handleErrors).then(function(e){return e.json()}).then(function(e){"End"===e.status?endGame():(drawBoard(e.displayBoard),setMessage(e.message),enableControls())}).catch(function(e){console.log("error",e),setMessage(e.message),enableControls()})}function enableControls(){var e=document.getElementById("position");e.disabled=!1,e.value="",$("#fireButton").prop("disabled",!1)}function endGame(){$("#grid-container").empty(),$("#game-panel").addClass("end-game-panel").removeClass("game-panel");var e=document.getElementById("grid-container");e.innerHTML='<span class="title-font">GAME OVER</span>'}function handleErrors(e){if(!e.ok)throw e.status>=500?Error("Something went wrong, please try again"):Error(e.statusText);return e}function setMessage(e){var n=document.getElementById("message");n.innerHTML='<span class="action-message-anim">'+e+"</span>"}function getInitialBoard(){fetch("/api/game",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(handleErrors).then(function(e){return e.json()}).then(function(e){drawBoard(e.displayBoard)}).catch(function(e){console.log("error",e)})}function getCellIcon(e){return"Hit"==e?"fa-fire orange-icon":"Miss"==e?"fa-times red-icon":"Sink"==e?"fa-fire orange-icon":void 0}function drawBoard(e){var n=document.getElementById("grid-container"),t='<div id="grid" class="grid">';e.map(function(e){var n="";e.map(function(e){var t=getCellIcon(e);n+='<div class="grid-cell"><i class="fa '+t+'" aria-hidden="true"></i></div>'}),t+='<div class="grid-row">'+n+"</div>"}),t+="</div>",n.innerHTML=t}$("document").ready(function(){getInitialBoard()});